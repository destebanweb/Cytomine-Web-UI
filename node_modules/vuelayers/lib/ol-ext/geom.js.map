{"version":3,"file":"geom.js","sources":["src/ol-ext/geom.js"],"sourcesContent":["import pointOnFeature from '@turf/point-on-feature'\nimport Circle from 'ol/geom/Circle'\nimport GeometryCollection from 'ol/geom/GeometryCollection'\nimport LineString from 'ol/geom/LineString'\nimport MultiLineString from 'ol/geom/MultiLineString'\nimport MultiPoint from 'ol/geom/MultiPoint'\nimport MultiPolygon from 'ol/geom/MultiPolygon'\nimport Point from 'ol/geom/Point'\nimport Polygon, { circular as circularPolygon } from 'ol/geom/Polygon'\nimport { GEOMETRY_TYPE } from './consts'\n\n/**\n * @param {number|number[]} lonOrCoordinates\n * @param {number} [lat]\n * @return {Point}\n */\nexport function createPointGeom (lonOrCoordinates, lat) {\n  const coordinates = Array.isArray(lonOrCoordinates)\n    ? lonOrCoordinates\n    : [lonOrCoordinates, lat]\n\n  return new Point(coordinates)\n}\n\n/**\n * @param {Array<number[]>} points\n * @returns {LineString}\n */\nexport function createLineGeom (points) {\n  return new LineString(points)\n}\n\n/**\n * @param {Array<Array<number[]>>} rings\n * @returns {Polygon}\n */\nexport function createPolygonGeom (rings) {\n  return new Polygon(rings)\n}\n\n/**\n * @param {Array<number[]>} points\n * @returns {MultiPoint}\n */\nexport function createMultiPointGeom (points) {\n  return new MultiPoint(points)\n}\n\n/**\n * @param {Array<Array<number[]>>} lines\n * @returns {MultiLineString}\n */\nexport function createMultiLineGeom (lines) {\n  return new MultiLineString(lines)\n}\n\n/**\n * @param {Array<Array<Array<number[]>>>} polygons\n * @returns {MultiPolygon}\n */\nexport function createMultiPolygonGeom (polygons) {\n  return new MultiPolygon(polygons)\n}\n\n/**\n * @param {Geometry[]} geoms\n * @returns {GeometryCollection}\n */\nexport function createGeomCollection (geoms) {\n  return new GeometryCollection(geoms)\n}\n\n/**\n * @param {Coordinate|number[]} center\n * @param {number} radius\n * @return {Polygon}\n */\nexport function createCircularPolygon (center, radius) {\n  return circularPolygon(center, radius)\n}\n\n/**\n * @param {Geometry|Object} geom\n * @return {boolean}\n * @throws {Error}\n */\nexport function isMultiGeom (geom) {\n  let multiTypes = [\n    GEOMETRY_TYPE.MULTI_POINT,\n    GEOMETRY_TYPE.MULTI_LINE_STRING,\n    GEOMETRY_TYPE.MULTI_POLYGON,\n    GEOMETRY_TYPE.GEOMETRY_COLLECTION,\n  ]\n\n  return multiTypes.includes(geom.type || geom.getType())\n}\n\n/**\n * @param {Geometry|Object} geom\n * @return {SimpleGeometry|Object}\n * @throws {Error}\n */\nexport function toSimpleGeom (geom) {\n  if (geom instanceof Circle) {\n    geom = createPointGeom(geom.getCenter())\n  }\n\n  const type = geom.type || geom.getType()\n  const complexTypes = [\n    GEOMETRY_TYPE.GEOMETRY_COLLECTION,\n  ]\n\n  if (complexTypes.includes(type) === false) {\n    return geom\n  }\n\n  return (geom.geometries || geom.getGeometries())[0]\n}\n\n/**\n * @param {Geometry|Object} geom\n * @return {Coordinate|undefined}\n */\nexport function findPointOnSurface (geom) {\n  const simpleGeom = toSimpleGeom(geom)\n  const pointFeature = pointOnFeature({\n    type: simpleGeom.type || simpleGeom.getType(),\n    coordinates: simpleGeom.coordinates || simpleGeom.getCoordinates(),\n  })\n\n  if (pointFeature && pointFeature.geometry) {\n    return pointFeature.geometry.coordinates\n  }\n}\n"],"names":["createPointGeom","lonOrCoordinates","lat","coordinates","Point","createLineGeom","points","LineString","createPolygonGeom","rings","Polygon","createMultiPointGeom","MultiPoint","createMultiLineGeom","lines","MultiLineString","createMultiPolygonGeom","polygons","MultiPolygon","createGeomCollection","geoms","GeometryCollection","createCircularPolygon","center","radius","circularPolygon","isMultiGeom","geom","multiTypes","GEOMETRY_TYPE","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","includes","type","getType","toSimpleGeom","Circle","getCenter","complexTypes","geometries","getGeometries","findPointOnSurface","simpleGeom","pointFeature","pointOnFeature","getCoordinates","geometry"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAWA;;;;;;AAKA,AAAO,SAASA,eAAT,CAA0BC,gBAA1B,EAA4CC,GAA5C,EAAiD;MAChDC,WAAW,GAAG,eAAcF,gBAAd,IAChBA,gBADgB,GAEhB,CAACA,gBAAD,EAAmBC,GAAnB,CAFJ;SAIO,IAAIE,KAAJ,CAAUD,WAAV,CAAP;;;;;;;AAOF,AAAO,SAASE,cAAT,CAAyBC,MAAzB,EAAiC;SAC/B,IAAIC,UAAJ,CAAeD,MAAf,CAAP;;;;;;;AAOF,AAAO,SAASE,iBAAT,CAA4BC,KAA5B,EAAmC;SACjC,IAAIC,OAAJ,CAAYD,KAAZ,CAAP;;;;;;;AAOF,AAAO,SAASE,oBAAT,CAA+BL,MAA/B,EAAuC;SACrC,IAAIM,UAAJ,CAAeN,MAAf,CAAP;;;;;;;AAOF,AAAO,SAASO,mBAAT,CAA8BC,KAA9B,EAAqC;SACnC,IAAIC,eAAJ,CAAoBD,KAApB,CAAP;;;;;;;AAOF,AAAO,SAASE,sBAAT,CAAiCC,QAAjC,EAA2C;SACzC,IAAIC,YAAJ,CAAiBD,QAAjB,CAAP;;;;;;;AAOF,AAAO,SAASE,oBAAT,CAA+BC,KAA/B,EAAsC;SACpC,IAAIC,kBAAJ,CAAuBD,KAAvB,CAAP;;;;;;;;AAQF,AAAO,SAASE,qBAAT,CAAgCC,MAAhC,EAAwCC,MAAxC,EAAgD;SAC9CC,QAAe,CAACF,MAAD,EAASC,MAAT,CAAtB;;;;;;;;AAQF,AAAO,SAASE,WAAT,CAAsBC,IAAtB,EAA4B;MAC7BC,UAAU,GAAG,CACfC,aAAa,CAACC,WADC,EAEfD,aAAa,CAACE,iBAFC,EAGfF,aAAa,CAACG,aAHC,EAIfH,aAAa,CAACI,mBAJC,CAAjB;SAOOL,UAAU,CAACM,QAAX,CAAoBP,IAAI,CAACQ,IAAL,IAAaR,IAAI,CAACS,OAAL,EAAjC,CAAP;;;;;;;;AAQF,AAAO,SAASC,YAAT,CAAuBV,IAAvB,EAA6B;MAC9BA,IAAI,YAAYW,MAApB,EAA4B;IAC1BX,IAAI,GAAG3B,eAAe,CAAC2B,IAAI,CAACY,SAAL,EAAD,CAAtB;;;MAGIJ,IAAI,GAAGR,IAAI,CAACQ,IAAL,IAAaR,IAAI,CAACS,OAAL,EAA1B;MACMI,YAAY,GAAG,CACnBX,aAAa,CAACI,mBADK,CAArB;;MAIIO,YAAY,CAACN,QAAb,CAAsBC,IAAtB,MAAgC,KAApC,EAA2C;WAClCR,IAAP;;;SAGK,CAACA,IAAI,CAACc,UAAL,IAAmBd,IAAI,CAACe,aAAL,EAApB,EAA0C,CAA1C,CAAP;;;;;;;AAOF,AAAO,SAASC,kBAAT,CAA6BhB,IAA7B,EAAmC;MAClCiB,UAAU,GAAGP,YAAY,CAACV,IAAD,CAA/B;MACMkB,YAAY,GAAGC,cAAc,CAAC;IAClCX,IAAI,EAAES,UAAU,CAACT,IAAX,IAAmBS,UAAU,CAACR,OAAX,EADS;IAElCjC,WAAW,EAAEyC,UAAU,CAACzC,WAAX,IAA0ByC,UAAU,CAACG,cAAX;GAFN,CAAnC;;MAKIF,YAAY,IAAIA,YAAY,CAACG,QAAjC,EAA2C;WAClCH,YAAY,CAACG,QAAb,CAAsB7C,WAA7B;;;;;;"}