{"version":3,"file":"from-ol-event.js","sources":["src/rx-ext/from-ol-event.js"],"sourcesContent":["import { fromEventPattern, merge as mergeObs } from 'rxjs/observable'\n\n/**\n * Creates an Observable using OpenLayers event pattern that emits events coming from the given event target.\n *\n * @example **Subscribe on view center change events**\n * const map = ol.Map({ ... })\n * const changes = Observable.fromOlEvent(map.getView(), 'change:center')\n *\n * changes.subscribe(({ coordinate }) => console.log(coordinate))\n *\n * @param {ol.Object} target OpenLayers event target.\n * @param {string|Object[]} eventName The event name of interest, being emitted by the `target`\n *                          or an array of events/selectors like `[{ event: 'event1', selector?: x => x }, ...]`.\n * @param {function(...*): *} [selector] An optional function to post-process results. It takes the arguments\n *    from the event handler and should return a single value.\n * @return {Observable<T>}\n * @memberOf {Observable}\n */\nexport default function fromOlEvent (target, eventName, selector) {\n  if (Array.isArray(eventName)) {\n    return mergeObs(\n      ...eventName.map(\n        elem => {\n          let eventName, selector\n\n          if (typeof elem === 'object') {\n            eventName = elem.event\n            selector = elem.selector\n          } else {\n            eventName = elem\n          }\n\n          return fromOlEvent(target, eventName, selector)\n        },\n      ),\n    )\n  }\n\n  return fromEventPattern(\n    handler => target.on(eventName, handler),\n    handler => target.un(eventName, handler),\n    selector,\n  )\n}\n"],"names":["fromOlEvent","target","eventName","selector","mergeObs","map","elem","event","fromEventPattern","handler","on","un"],"mappings":";;;;;;;;;;;;;;;;AAEA;;;;;;;;;;;;;;;;;;AAiBA,AAAe,SAASA,WAAT,CAAsBC,MAAtB,EAA8BC,SAA9B,EAAyCC,QAAzC,EAAmD;MAC5D,eAAcD,SAAd,CAAJ,EAA8B;WACrBE,KAAQ,MAAR,4BACFF,SAAS,CAACG,GAAV,CACD,UAAAC,IAAI,EAAI;UACFJ,SAAJ,EAAeC,QAAf;;UAEI,QAAOG,IAAP,MAAgB,QAApB,EAA8B;QAC5BJ,SAAS,GAAGI,IAAI,CAACC,KAAjB;QACAJ,QAAQ,GAAGG,IAAI,CAACH,QAAhB;OAFF,MAGO;QACLD,SAAS,GAAGI,IAAZ;;;aAGKN,WAAW,CAACC,MAAD,EAASC,SAAT,EAAoBC,QAApB,CAAlB;KAXD,CADE,EAAP;;;SAkBKK,gBAAgB,CACrB,UAAAC,OAAO;WAAIR,MAAM,CAACS,EAAP,CAAUR,SAAV,EAAqBO,OAArB,CAAJ;GADc,EAErB,UAAAA,OAAO;WAAIR,MAAM,CAACU,EAAP,CAAUT,SAAV,EAAqBO,OAArB,CAAJ;GAFc,EAGrBN,QAHqB,CAAvB;;;;;"}