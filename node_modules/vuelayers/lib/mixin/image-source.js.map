{"version":3,"file":"image-source.js","sources":["src/mixin/image-source.js"],"sourcesContent":["import { observableFromOlEvent } from '../rx-ext'\nimport { EPSG_3857 } from '../ol-ext/consts'\nimport { hasSource } from '../util/assert'\nimport source from './source'\n\n/**\n * @vueProps\n */\nconst props = {\n  crossOrigin: String,\n  projection: {\n    type: String,\n    default: EPSG_3857,\n  },\n}\n\n/**\n * @vueMethods\n */\nconst methods = {\n  /**\n   * @return {Promise}\n   * @protected\n   */\n  init () {\n    return this::source.methods.init()\n  },\n  /**\n   * @return {void|Promise<void>}\n   * @protected\n   */\n  deinit () {\n    return this::source.methods.deinit()\n  },\n  /**\n   * @return {void}\n   * @protected\n   */\n  mount () {\n    this::source.methods.mount()\n  },\n  /**\n   * @return {void}\n   * @protected\n   */\n  unmount () {\n    this::source.methods.unmount()\n  },\n  subscribeAll () {\n    this::subscribeToSourceEvents()\n  },\n}\n\n/**\n * @vueProto\n * @alias module:mixin/image-source\n */\nexport default {\n  mixins: [source],\n  props,\n  methods,\n}\n\nfunction subscribeToSourceEvents () {\n  hasSource(this)\n\n  const events = observableFromOlEvent(this.$source, [\n    'imageloadend',\n    'imageloaderror',\n    'imageloadstart',\n  ])\n\n  this.subscribeTo(events, evt => this.$emit(evt.type, evt))\n}\n"],"names":["props","crossOrigin","String","projection","type","default","EPSG_3857","methods","init","source","deinit","mount","unmount","subscribeAll","subscribeToSourceEvents","mixins","hasSource","events","observableFromOlEvent","$source","subscribeTo","evt","$emit"],"mappings":";;;;;;;;;;;;;;;AAKA;;;;AAGA,IAAMA,KAAK,GAAG;EACZC,WAAW,EAAEC,MADD;EAEZC,UAAU,EAAE;IACVC,IAAI,EAAEF,MADI;IAEVG,OAAO,EAAEC;;;;;;CAJb;AAWA,IAAMC,OAAO,GAAG;;;;;EAKdC,IALc,kBAKN;WACOC,MAAM,CAACF,OAAP,CAAeC,IAArB,WAAP;GANY;;;;;;EAYdE,MAZc,oBAYJ;WACKD,MAAM,CAACF,OAAP,CAAeG,MAArB,WAAP;GAbY;;;;;;EAmBdC,KAnBc,mBAmBL;IACDF,MAAM,CAACF,OAAP,CAAeI,KAArB;GApBY;;;;;;EA0BdC,OA1Bc,qBA0BH;IACHH,MAAM,CAACF,OAAP,CAAeK,OAArB;GA3BY;EA6BdC,YA7Bc,0BA6BE;IACRC,uBAAN;;CA9BJ;;;;;;AAsCA,kBAAe;EACbC,MAAM,EAAE,CAACN,MAAD,CADK;EAEbT,KAAK,EAALA,KAFa;EAGbO,OAAO,EAAPA;CAHF;;AAMA,SAASO,uBAAT,GAAoC;;;EAClCE,SAAS,CAAC,IAAD,CAAT;MAEMC,MAAM,GAAGC,qBAAqB,CAAC,KAAKC,OAAN,EAAe,CACjD,cADiD,EAEjD,gBAFiD,EAGjD,gBAHiD,CAAf,CAApC;OAMKC,WAAL,CAAiBH,MAAjB,EAAyB,UAAAI,GAAG;WAAI,KAAI,CAACC,KAAL,CAAWD,GAAG,CAACjB,IAAf,EAAqBiB,GAArB,CAAJ;GAA5B;;;;;"}