{"version":3,"file":"ident-map.js","sources":["src/mixin/ident-map.js"],"sourcesContent":["import Vue from 'vue'\nimport IdentityMap from '../util/identity-map'\nimport { identity } from '../util/minilo'\n\n// todo uncomment when IE 11 will die\n// const IDENTITY_MAP_PROP = Symbol('identityMap')\nconst IDENTITY_MAP_PROP = 'identityMap'\n/**\n * @alias module:mixin/ident-map\n * @title identMap\n * @vueProto\n */\nexport default {\n  IDENTITY_MAP_PROP,\n  props: {\n    /**\n     * Unique key for saving to identity map\n     * @type {string|number}\n     * @experimental\n     */\n    ident: [String, Number],\n  },\n  methods: {\n    /**\n     * @param parts\n     * @return {string|undefined}\n     * @protected\n     */\n    makeSelfIdent (...parts) {\n      if (!this.ident) return\n\n      return this.makeIdent(this.ident, ...parts)\n    },\n    /**\n     * @param parts\n     * @return {string}\n     */\n    makeIdent (...parts) {\n      return parts.filter(identity).join('.')\n    },\n  },\n  created () {\n    this::initIdentityMap()\n  },\n}\n\n/**\n * @private\n */\nfunction initIdentityMap () {\n  if (!this[IDENTITY_MAP_PROP]) {\n    Vue[IDENTITY_MAP_PROP] = Vue.prototype[IDENTITY_MAP_PROP] = new IdentityMap()\n  }\n  Object.defineProperties(this, {\n    $identityMap: {\n      enumerable: true,\n      get: () => this[IDENTITY_MAP_PROP],\n    },\n  })\n}\n"],"names":["IDENTITY_MAP_PROP","props","ident","String","Number","methods","makeSelfIdent","parts","makeIdent","filter","identity","join","created","initIdentityMap","Vue","prototype","IdentityMap","$identityMap","enumerable","get"],"mappings":";;;;;;;;;;;;;;;AAKA;;AACA,IAAMA,iBAAiB,GAAG,aAA1B;;;;;;;AAMA,eAAe;EACbA,iBAAiB,EAAjBA,iBADa;EAEbC,KAAK,EAAE;;;;;;IAMLC,KAAK,EAAE,CAACC,MAAD,EAASC,MAAT;GARI;EAUbC,OAAO,EAAE;;;;;;IAMPC,aANO,2BAMkB;UACnB,CAAC,KAAKJ,KAAV,EAAiB;;wCADDK,KAAO;QAAPA,KAAO;;;aAGhB,KAAKC,SAAL,cAAe,KAAKN,KAApB,SAA8BK,KAA9B,EAAP;KATK;;;;;;IAePC,SAfO,uBAec;yCAAPD,KAAO;QAAPA,KAAO;;;aACZA,KAAK,CAACE,MAAN,CAAaC,QAAb,EAAuBC,IAAvB,CAA4B,GAA5B,CAAP;;GA1BS;EA6BbC,OA7Ba,qBA6BF;IACHC,eAAN;;CA9BJ;;;;;AAqCA,SAASA,eAAT,GAA4B;;;MACtB,CAAC,KAAKb,iBAAL,CAAL,EAA8B;IAC5Bc,GAAG,CAACd,iBAAD,CAAH,GAAyBc,GAAG,CAACC,SAAJ,CAAcf,iBAAd,IAAmC,IAAIgB,WAAJ,EAA5D;;;2BAEsB,IAAxB,EAA8B;IAC5BC,YAAY,EAAE;MACZC,UAAU,EAAE,IADA;MAEZC,GAAG,EAAE;eAAM,KAAI,CAACnB,iBAAD,CAAV;;;GAHT;;;;;"}