{"version":3,"file":"geometry-container.js","sources":["src/mixin/geometry-container.js"],"sourcesContent":["import Vue from 'vue'\nimport { isPlainObject } from '../util/minilo'\nimport projTransforms from './proj-transforms'\n\nconst methods = {\n  /**\n   * @return {{\n   *     getGeometry: function(): Geometry|undefined,\n   *     setGeometry: function(Geometry|undefined)\n   *   }|undefined}\n   * @protected\n   */\n  getGeometryTarget () {\n    throw new Error('Not implemented method')\n  },\n  /**\n   * @return {Geometry|undefined}\n   */\n  getGeometry () {\n    return this._geometry\n  },\n  /**\n   * @return {Object}\n   * @protected\n   */\n  getServices () {\n    const vm = this\n\n    return {\n      get geometryContainer () { return vm },\n    }\n  },\n  /**\n   * @param {Geometry|Vue|Object|undefined} geom\n   * @return {void}\n   * @throws {AssertionError}\n   */\n  setGeometry (geom) {\n    if (geom instanceof Vue) {\n      geom = geom.$geometry\n    } else if (isPlainObject(geom)) {\n      geom = this.readGeometryInDataProj(geom)\n    }\n\n    if (geom !== this._geometry) {\n      this._geometry = geom\n    }\n\n    const geomTarget = this.getGeometryTarget()\n    if (geomTarget && geom !== geomTarget.getGeometry()) {\n      geomTarget.setGeometry(geom)\n    }\n  },\n}\n\nexport default {\n  mixins: [projTransforms],\n  methods,\n  created () {\n    /**\n     * @type {Geometry|undefined}\n     * @private\n     */\n    this._geometry = undefined\n\n    Object.defineProperties(this, {\n      $geometry: {\n        enumerable: true,\n        get: this.getGeometry,\n      },\n    })\n  },\n}\n"],"names":["methods","getGeometryTarget","Error","getGeometry","_geometry","getServices","vm","geometryContainer","setGeometry","geom","Vue","$geometry","isPlainObject","readGeometryInDataProj","geomTarget","mixins","projTransforms","created","undefined","enumerable","get"],"mappings":";;;;;;;;;;;;;;;AAIA,IAAMA,OAAO,GAAG;;;;;;;;EAQdC,iBARc,+BAQO;UACb,IAAIC,KAAJ,CAAU,wBAAV,CAAN;GATY;;;;;EAcdC,WAdc,yBAcC;WACN,KAAKC,SAAZ;GAfY;;;;;;EAqBdC,WArBc,yBAqBC;QACPC,EAAE,GAAG,IAAX;WAEO;UACDC,iBAAJ,GAAyB;eAASD,EAAP;;;KAD7B;GAxBY;;;;;;;EAiCdE,WAjCc,uBAiCDC,IAjCC,EAiCK;QACbA,IAAI,YAAYC,GAApB,EAAyB;MACvBD,IAAI,GAAGA,IAAI,CAACE,SAAZ;KADF,MAEO,IAAIC,aAAa,CAACH,IAAD,CAAjB,EAAyB;MAC9BA,IAAI,GAAG,KAAKI,sBAAL,CAA4BJ,IAA5B,CAAP;;;QAGEA,IAAI,KAAK,KAAKL,SAAlB,EAA6B;WACtBA,SAAL,GAAiBK,IAAjB;;;QAGIK,UAAU,GAAG,KAAKb,iBAAL,EAAnB;;QACIa,UAAU,IAAIL,IAAI,KAAKK,UAAU,CAACX,WAAX,EAA3B,EAAqD;MACnDW,UAAU,CAACN,WAAX,CAAuBC,IAAvB;;;CA9CN;AAmDA,wBAAe;EACbM,MAAM,EAAE,CAACC,cAAD,CADK;EAEbhB,OAAO,EAAPA,OAFa;EAGbiB,OAHa,qBAGF;;;;;SAKJb,SAAL,GAAiBc,SAAjB;;6BAEwB,IAAxB,EAA8B;MAC5BP,SAAS,EAAE;QACTQ,UAAU,EAAE,IADH;QAETC,GAAG,EAAE,KAAKjB;;KAHd;;CAVJ;;;;"}