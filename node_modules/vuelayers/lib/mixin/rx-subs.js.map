{"version":3,"file":"rx-subs.js","sources":["src/mixin/rx-subs.js"],"sourcesContent":["import { error as logError } from '../util/log'\n\nconst noop = () => {}\n\n/**\n * RxJS subscriptions manager.\n */\nexport default {\n  methods: {\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () { },\n    /**\n     * @return {void}\n     * @protected\n     */\n    unsubscribeAll () {\n      this._rxSubs.forEach(x => x.unsubscribe())\n      this._rxSubs = []\n    },\n    /**\n     * @param {Observable<T>} observable\n     * @param {function} [next] Next handler or Observer object.\n     * @param {function} [error] Error handler.\n     * @param {function} [complete] Complete handler.\n     * @return {Subscription}\n     * @protected\n     */\n    subscribeTo (observable, next = noop, error = noop, complete = noop) {\n      error = err => {\n        if (process.env.NODE_ENV !== 'production') {\n          logError(err.stack)\n        }\n        error(err)\n      }\n\n      const subs = observable.subscribe(next, error, complete)\n      this._rxSubs.push(subs)\n\n      return subs\n    },\n  },\n  beforeCreate () {\n    /**\n     * @type {Subscription[]}\n     * @private\n     */\n    this._rxSubs = []\n  },\n  destroyed () {\n    this.unsubscribeAll()\n  },\n}\n"],"names":["noop","methods","subscribeAll","unsubscribeAll","_rxSubs","forEach","x","unsubscribe","subscribeTo","observable","next","error","complete","err","process","env","NODE_ENV","logError","stack","subs","subscribe","push","beforeCreate","destroyed"],"mappings":";;;;;;;;;;;;AAEA,IAAMA,IAAI,GAAG,SAAPA,IAAO,GAAM,EAAnB;;;;;;AAKA,aAAe;EACbC,OAAO,EAAE;;;;;IAKPC,YALO,0BAKS,EALT;;;;;;IAUPC,cAVO,4BAUW;WACXC,OAAL,CAAaC,OAAb,CAAqB,UAAAC,CAAC;eAAIA,CAAC,CAACC,WAAF,EAAJ;OAAtB;;WACKH,OAAL,GAAe,EAAf;KAZK;;;;;;;;;;IAsBPI,WAtBO,uBAsBMC,UAtBN,EAsB8D;UAA5CC,IAA4C,uEAArCV,IAAqC;;UAA/BW,MAA+B,uEAAvBX,IAAuB;;UAAjBY,QAAiB,uEAANZ,IAAM;;MACnEW,MAAK,GAAG,kBAAAE,GAAG,EAAI;YACTC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;UACzCC,KAAQ,CAACJ,GAAG,CAACK,KAAL,CAAR;;;QAEFP,MAAK,CAACE,GAAD,CAAL;OAJF;;UAOMM,IAAI,GAAGV,UAAU,CAACW,SAAX,CAAqBV,IAArB,EAA2BC,MAA3B,EAAkCC,QAAlC,CAAb;;WACKR,OAAL,CAAaiB,IAAb,CAAkBF,IAAlB;;aAEOA,IAAP;;GAlCS;EAqCbG,YArCa,0BAqCG;;;;;SAKTlB,OAAL,GAAe,EAAf;GA1CW;EA4CbmB,SA5Ca,uBA4CA;SACNpB,cAAL;;CA7CJ;;;;"}