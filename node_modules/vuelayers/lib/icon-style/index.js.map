{"version":3,"file":"index.js","sources":["src/component/icon-style/style.vue?rollup-plugin-vue=script.js","src/component/icon-style/style.vue","src/component/icon-style/index.js"],"sourcesContent":["\nimport Icon from 'ol/style/Icon'\nimport imageStyle from '../../mixin/image-style'\nimport { isEqual } from '../../util/minilo'\n\nconst props = {\n  src: {\n    type: String,\n    required: true,\n  },\n  size: {\n    type: Array,\n    validator: value => value.length === 2,\n  },\n  anchor: {\n    type: Array,\n    default: () => [0.5, 0.5],\n    validator: value => value.length === 2,\n  },\n  anchorOrigin: {\n    type: String,\n    default: 'top-left', // bottom-left, bottom-right, top-left or top-right\n  },\n  anchorXUnits: {\n    type: String,\n    default: 'fraction', // pixels, fraction\n  },\n  anchorYUnits: {\n    type: String,\n    default: 'fraction', // pixels, fraction\n  },\n  color: [Array, String],\n  crossOrigin: String,\n  offset: {\n    type: Array,\n    default: () => [0, 0],\n    validator: value => value.length === 2,\n  },\n  offsetOrigin: {\n    type: String,\n    default: 'top-left', // bottom-left, bottom-right, top-left or top-right\n  },\n  opacity: {\n    type: Number,\n    default: 1,\n  },\n  scale: {\n    type: Number,\n    default: 1,\n  },\n  rotateWithView: {\n    type: Boolean,\n    default: false,\n  },\n  rotation: {\n    type: Number,\n    default: 0,\n  },\n}\n\nconst methods = {\n  /**\n   * @return {Icon}\n   * @protected\n   */\n  createStyle () {\n    return new Icon({\n      anchor: this.anchor,\n      anchorOrigin: this.anchorOrigin,\n      anchorXUnits: this.anchorXUnits,\n      anchorYUnits: this.anchorYUnits,\n      color: this.color,\n      crossOrigin: this.crossOrigin,\n      offset: this.offset,\n      offsetOrigin: this.offsetOrigin,\n      opacity: this.opacity,\n      scale: this.scale,\n      rotateWithView: this.rotateWithView,\n      rotation: this.rotation,\n      size: this.size,\n      src: this.src,\n    })\n  },\n}\n// todo other watchers\nconst watch = {\n  src (value) {\n    if (this.$style && !isEqual(value, this.$style.getSrc())) {\n      this.scheduleRefresh()\n    }\n  },\n  size (value) {\n    if (this.$style && !isEqual(value, this.$style.getSize())) {\n      this.scheduleRefresh()\n    }\n  },\n  anchor (value) {\n    if (this.$style && !isEqual(value, this.$style.getAnchor())) {\n      this.scheduleRefresh()\n    }\n  },\n  scale (value) {\n    if (this.$style && !isEqual(value, this.$style.getScale())) {\n      this.scheduleRefresh()\n    }\n  },\n}\n\nexport default {\n  name: 'vl-style-icon',\n  mixins: [imageStyle],\n  props,\n  methods,\n  watch,\n}\n","<script>\n  import Icon from 'ol/style/Icon'\n  import imageStyle from '../../mixin/image-style'\n  import { isEqual } from '../../util/minilo'\n\n  const props = {\n    src: {\n      type: String,\n      required: true,\n    },\n    size: {\n      type: Array,\n      validator: value => value.length === 2,\n    },\n    anchor: {\n      type: Array,\n      default: () => [0.5, 0.5],\n      validator: value => value.length === 2,\n    },\n    anchorOrigin: {\n      type: String,\n      default: 'top-left', // bottom-left, bottom-right, top-left or top-right\n    },\n    anchorXUnits: {\n      type: String,\n      default: 'fraction', // pixels, fraction\n    },\n    anchorYUnits: {\n      type: String,\n      default: 'fraction', // pixels, fraction\n    },\n    color: [Array, String],\n    crossOrigin: String,\n    offset: {\n      type: Array,\n      default: () => [0, 0],\n      validator: value => value.length === 2,\n    },\n    offsetOrigin: {\n      type: String,\n      default: 'top-left', // bottom-left, bottom-right, top-left or top-right\n    },\n    opacity: {\n      type: Number,\n      default: 1,\n    },\n    scale: {\n      type: Number,\n      default: 1,\n    },\n    rotateWithView: {\n      type: Boolean,\n      default: false,\n    },\n    rotation: {\n      type: Number,\n      default: 0,\n    },\n  }\n\n  const methods = {\n    /**\n     * @return {Icon}\n     * @protected\n     */\n    createStyle () {\n      return new Icon({\n        anchor: this.anchor,\n        anchorOrigin: this.anchorOrigin,\n        anchorXUnits: this.anchorXUnits,\n        anchorYUnits: this.anchorYUnits,\n        color: this.color,\n        crossOrigin: this.crossOrigin,\n        offset: this.offset,\n        offsetOrigin: this.offsetOrigin,\n        opacity: this.opacity,\n        scale: this.scale,\n        rotateWithView: this.rotateWithView,\n        rotation: this.rotation,\n        size: this.size,\n        src: this.src,\n      })\n    },\n  }\n  // todo other watchers\n  const watch = {\n    src (value) {\n      if (this.$style && !isEqual(value, this.$style.getSrc())) {\n        this.scheduleRefresh()\n      }\n    },\n    size (value) {\n      if (this.$style && !isEqual(value, this.$style.getSize())) {\n        this.scheduleRefresh()\n      }\n    },\n    anchor (value) {\n      if (this.$style && !isEqual(value, this.$style.getAnchor())) {\n        this.scheduleRefresh()\n      }\n    },\n    scale (value) {\n      if (this.$style && !isEqual(value, this.$style.getScale())) {\n        this.scheduleRefresh()\n      }\n    },\n  }\n\n  export default {\n    name: 'vl-style-icon',\n    mixins: [imageStyle],\n    props,\n    methods,\n    watch,\n  }\n</script>\n","import { pick } from '../../util/minilo'\nimport Style from './style.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Style, options)\n\n  Vue.component(Style.name, Style)\n}\n\nexport default plugin\n\nexport {\n  Style,\n  plugin as install,\n}\n"],"names":["props","src","type","String","required","size","Array","validator","value","length","anchor","default","anchorOrigin","anchorXUnits","anchorYUnits","color","crossOrigin","offset","offsetOrigin","opacity","Number","scale","rotateWithView","Boolean","rotation","methods","createStyle","Icon","watch","$style","isEqual","getSrc","scheduleRefresh","getSize","getAnchor","getScale","name","mixins","imageStyle","plugin","Vue","options","installed","pick","Style","component"],"mappings":"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"}