{"version":3,"file":"index.js","sources":["src/component/text-style/style.vue?rollup-plugin-vue=script.js","src/component/text-style/style.vue","src/component/text-style/index.js"],"sourcesContent":["\nimport Text from 'ol/style/Text'\nimport style from '../../mixin/style'\nimport { isEqual } from '../../util/minilo'\nimport withFillStrokeStyle from '../../mixin/with-fill-stroke-style'\nimport mergeDescriptors from '../../util/multi-merge-descriptors'\n\nconst props = {\n  font: {\n    type: String,\n    default: '10px sans-serif', // css font format https://developer.mozilla.org/en-US/docs/Web/CSS/font?v=control\n  },\n  placement: String,\n  offsetX: {\n    type: Number,\n    default: 0,\n  },\n  offsetY: {\n    type: Number,\n    default: 0,\n  },\n  rotateWithView: {\n    type: Boolean,\n    default: false,\n  },\n  rotation: {\n    type: Number,\n    default: 0,\n  },\n  scale: {\n    type: Number,\n    default: 1,\n  },\n  text: String,\n  textAlign: String, // left, right, center, end, start\n  textBaseline: String, // bottom, top, middle, alphabetic, hanging, ideographic\n}\n\nconst methods = {\n  /**\n   * @returns {Text}\n   * @protected\n   */\n  createStyle () {\n    return new Text({\n      font: this.font,\n      placement: this.placement,\n      offsetX: this.offsetX,\n      offsetY: this.offsetY,\n      rotateWithView: this.rotateWithView,\n      rotation: this.rotation,\n      scale: this.scale,\n      text: this.text,\n      textAlign: this.textAlign,\n      textBaseline: this.textBaseline,\n      fill: this._fill,\n      stroke: this._stroke,\n    })\n  },\n  /**\n   * @return {void}\n   * @protected\n   */\n  mount () {\n    this.$stylesContainer && this.$stylesContainer.setText(this)\n  },\n  /**\n   * @return {void}\n   * @protected\n   */\n  unmount () {\n    this.$stylesContainer && this.$stylesContainer.setText(undefined)\n  },\n  /**\n   * @returns {Object}\n   * @protected\n   */\n  getServices () {\n    const vm = this\n\n    return mergeDescriptors(this::style.methods.getServices(), {\n      get stylesContainer () { return vm },\n    })\n  },\n}\n\nconst watch = {\n  font (value) {\n    if (this.$style && !isEqual(value, this.$style.getFont())) {\n      this.$style.setFont(value)\n      this.scheduleRefresh()\n    }\n  },\n  offsetX (value) {\n    if (this.$style && !isEqual(value, this.$style.getOffsetX())) {\n      this.$style.setOffsetX(value)\n      this.scheduleRefresh()\n    }\n  },\n  offsetY (value) {\n    if (this.$style && !isEqual(value, this.$style.getOffsetY())) {\n      this.$style.setOffsetY(value)\n      this.scheduleRefresh()\n    }\n  },\n  rotation (value) {\n    if (this.$style && !isEqual(value, this.$style.getRotation())) {\n      this.$style.setRotation(value)\n      this.scheduleRefresh()\n    }\n  },\n  scale (value) {\n    if (this.$style && !isEqual(value, this.$style.getScale())) {\n      this.$style.setScale(value)\n      this.scheduleRefresh()\n    }\n  },\n  text (value) {\n    if (this.$style && !isEqual(value, this.$style.getText())) {\n      this.$style.setText(value)\n      this.scheduleRefresh()\n    }\n  },\n  textAlign (value) {\n    if (this.$style && !isEqual(value, this.$style.getTextAlign())) {\n      this.$style.setTextAlign(value)\n      this.scheduleRefresh()\n    }\n  },\n  textBaseline (value) {\n    if (this.$style && !isEqual(value, this.$style.getTextBaseline())) {\n      this.$style.setTextBaseline(value)\n      this.scheduleRefresh()\n    }\n  },\n}\n\nexport default {\n  name: 'vl-style-text',\n  mixins: [style, withFillStrokeStyle],\n  props,\n  methods,\n  watch,\n  stubVNode: {\n    empty: false,\n    attrs () {\n      return {\n        class: this.$options.name,\n      }\n    },\n  },\n}\n","<script>\n  import Text from 'ol/style/Text'\n  import style from '../../mixin/style'\n  import { isEqual } from '../../util/minilo'\n  import withFillStrokeStyle from '../../mixin/with-fill-stroke-style'\n  import mergeDescriptors from '../../util/multi-merge-descriptors'\n\n  const props = {\n    font: {\n      type: String,\n      default: '10px sans-serif', // css font format https://developer.mozilla.org/en-US/docs/Web/CSS/font?v=control\n    },\n    placement: String,\n    offsetX: {\n      type: Number,\n      default: 0,\n    },\n    offsetY: {\n      type: Number,\n      default: 0,\n    },\n    rotateWithView: {\n      type: Boolean,\n      default: false,\n    },\n    rotation: {\n      type: Number,\n      default: 0,\n    },\n    scale: {\n      type: Number,\n      default: 1,\n    },\n    text: String,\n    textAlign: String, // left, right, center, end, start\n    textBaseline: String, // bottom, top, middle, alphabetic, hanging, ideographic\n  }\n\n  const methods = {\n    /**\n     * @returns {Text}\n     * @protected\n     */\n    createStyle () {\n      return new Text({\n        font: this.font,\n        placement: this.placement,\n        offsetX: this.offsetX,\n        offsetY: this.offsetY,\n        rotateWithView: this.rotateWithView,\n        rotation: this.rotation,\n        scale: this.scale,\n        text: this.text,\n        textAlign: this.textAlign,\n        textBaseline: this.textBaseline,\n        fill: this._fill,\n        stroke: this._stroke,\n      })\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    mount () {\n      this.$stylesContainer && this.$stylesContainer.setText(this)\n    },\n    /**\n     * @return {void}\n     * @protected\n     */\n    unmount () {\n      this.$stylesContainer && this.$stylesContainer.setText(undefined)\n    },\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      const vm = this\n\n      return mergeDescriptors(this::style.methods.getServices(), {\n        get stylesContainer () { return vm },\n      })\n    },\n  }\n\n  const watch = {\n    font (value) {\n      if (this.$style && !isEqual(value, this.$style.getFont())) {\n        this.$style.setFont(value)\n        this.scheduleRefresh()\n      }\n    },\n    offsetX (value) {\n      if (this.$style && !isEqual(value, this.$style.getOffsetX())) {\n        this.$style.setOffsetX(value)\n        this.scheduleRefresh()\n      }\n    },\n    offsetY (value) {\n      if (this.$style && !isEqual(value, this.$style.getOffsetY())) {\n        this.$style.setOffsetY(value)\n        this.scheduleRefresh()\n      }\n    },\n    rotation (value) {\n      if (this.$style && !isEqual(value, this.$style.getRotation())) {\n        this.$style.setRotation(value)\n        this.scheduleRefresh()\n      }\n    },\n    scale (value) {\n      if (this.$style && !isEqual(value, this.$style.getScale())) {\n        this.$style.setScale(value)\n        this.scheduleRefresh()\n      }\n    },\n    text (value) {\n      if (this.$style && !isEqual(value, this.$style.getText())) {\n        this.$style.setText(value)\n        this.scheduleRefresh()\n      }\n    },\n    textAlign (value) {\n      if (this.$style && !isEqual(value, this.$style.getTextAlign())) {\n        this.$style.setTextAlign(value)\n        this.scheduleRefresh()\n      }\n    },\n    textBaseline (value) {\n      if (this.$style && !isEqual(value, this.$style.getTextBaseline())) {\n        this.$style.setTextBaseline(value)\n        this.scheduleRefresh()\n      }\n    },\n  }\n\n  export default {\n    name: 'vl-style-text',\n    mixins: [style, withFillStrokeStyle],\n    props,\n    methods,\n    watch,\n    stubVNode: {\n      empty: false,\n      attrs () {\n        return {\n          class: this.$options.name,\n        }\n      },\n    },\n  }\n</script>\n","import { pick } from '../../util/minilo'\nimport Style from './style.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Style, options)\n\n  Vue.component(Style.name, Style)\n}\n\nexport default plugin\n\nexport {\n  Style,\n  plugin as install,\n}\n"],"names":["props","font","type","String","default","placement","offsetX","Number","offsetY","rotateWithView","Boolean","rotation","scale","text","textAlign","textBaseline","methods","createStyle","Text","fill","_fill","stroke","_stroke","mount","$stylesContainer","setText","unmount","undefined","getServices","vm","mergeDescriptors","style","stylesContainer","watch","value","$style","isEqual","getFont","setFont","scheduleRefresh","getOffsetX","setOffsetX","getOffsetY","setOffsetY","getRotation","setRotation","getScale","setScale","getText","getTextAlign","setTextAlign","getTextBaseline","setTextBaseline","name","mixins","withFillStrokeStyle","stubVNode","empty","attrs","class","$options","plugin","Vue","options","installed","pick","Style","component"],"mappings":"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"}